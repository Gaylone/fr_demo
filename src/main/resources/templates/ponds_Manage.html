<!DOCTYPE html >
<html xmlns:th="http://www.thymeleaf.org">

	<head>
		<base th:href="${#request.getContextPath()}+'/'">
		<meta charset="UTF-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="format-detection" content="telephone=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta content="black" name="apple-mobile-web-app-status-bar-style">
		<link th:href="@{asserts/css/SYSFrame.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{asserts/font/iconfont.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{asserts/css/module.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{asserts/css/pages.css}" rel="stylesheet" type="text/css" />
		<link th:href="@{asserts/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
		<title>池塘管理</title>
		<script th:src="@{asserts/js/jquery-3.4.1.min.js}" type="text/javascript"></script>
		<script th:src="@{asserts/js/bootstrap.min.js}" type="text/javascript"></script>
		<script th:src="@{asserts/js/jquery.nicescroll.js}" type="text/javascript"></script>
		<script th:src="@{asserts/js/HUpages.js}" type="text/javascript"></script>
		<script th:src="@{asserts/js/other/ponds.js}" type="text/javascript"></script>
		<script th:src="@{asserts/js/template.js}" type="text/javascript"></script>
		<!--[if lt IE 9]>
		<script th:src ="@{asserts/js/html5shiv.js}" type="text/javascript"></script>
		<script th:src ="@{asserts/js/css3-mediaqueries.js}"  type="text/javascript"></script>


        <![endif]-->
		<script th:src="@{asserts/js/common.js}" type="text/javascript"></script>

	</head>

	<body id="situation" class="pagebox">

		<div class="pages-style">
			<!--左侧菜单栏-->

			<!--右侧内容-->
			<div class="bk-con-message message-section" id="iframe_box">
				<!--编辑内容-->
				<div class="operation  mb15 relative">


					<form class="form-inline" id="pond_search_form" method="post" action="ponds/getPondsByCondition">
						<button  class="btn button_btn bg-deep-blue menuUl_title" type="button" data-toggle="modal" data-target="#myModal" title="添加池塘">
							<i class="iconfont"></i>&nbsp;添加池塘
						</button>

					<div class="form-group">
						<label for="pname">池塘名</label>
						<input type="text" name="pName" class="form-control"  placeholder="输入查询信息"/>

					</div>
						<div class="form-group">
							<label for="pname">地址</label>
							<input type="text"name="pAddress" class="form-control"  placeholder="输入查询信息"/>
						</div>
						<div class="form-group">
							<label for="psize">尺寸区间</label>
							<input type="text"name="minSize" class="form-control"  placeholder="最小值"/>
							-
							<input type="text"name="maxSize" class="form-control"  placeholder="最大值"/>
						</div>
					<span class="sumQuantity">池塘数量：<em id="quantity"></em>个</span>
						<button type="button" class="btn btn-default" id="search_submit">
							<span class="glyphicon glyphicon-search" aria-hidden="true"></span> 搜索
						</button>
					</form>
				</div>

				<!-- Modal -->
				<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								<h4 class="modal-title" id="myModalLabel">Modal title</h4>
							</div>
							<div class="modal-body">
								<div class="form-group">
									<label for="pname">池塘名</label>
									<input type="text" class="form-control" id="pname" placeholder="最好以人名+#池塘类型命名，如'林颂忠#虾塘'">
								</div>

								<div class="form-group">
									<label for="paddress">池塘地址</label>
									<input type="text" class="form-control" id="paddress" placeholder="池塘地址">
								</div>
								<div class="form-group">
									<label for="ptype">池塘类型</label>
									<input type="text" class="form-control" id="ptype" placeholder="池塘类型">
								</div>
								<div class="form-group">
									<label for="psize">池塘尺寸</label>
									<input type="text" class="form-control" id="psize" placeholder="单位是亩">
								</div>
								<div class="form-group">
									<label for="fIDNum">所属人</label>
									<input type="text" class="form-control" id="fIDNum" placeholder="所属人的身份证号码">
									<span class="message" id="farmerInfo"></span>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
								<button type="button" class="btn btn-primary" id="savePond">添加</button>
							</div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="changeInfoModal" tabindex="-1" role="dialog" aria-labelledby="mydetailModalLabel">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								<h4 class="modal-title" id="mydetailModalLabel">修改池塘信息</h4>
							</div>
							<div class="modal-body">
								<div class="form-group">
									<label>池塘名:<span id="old_pName"></span></label>
									<input type="text" class="form-control" id="new_pname" placeholder="新塘名，如果不调整不填">
								</div>
								<div class="form-group">
									<label>所属人:<span id="old_fName"></span></label>
									<select class="form-control" id="new_fName" name="new_fName">

									</select>

								</div>
								<div class="form-group">
									<label>类型:<span id="old_pType"></span></label>
									<input type="text" class="form-control" id="new_type" placeholder="类型调整，如果不调整不填">
								</div>
								<div class="form-group">
									<label>尺寸:<span id="old_pSize"></span></label>
									<input type="text" class="form-control" id="new_size" placeholder="尺寸调整，如果不调整不填">
									<span id="psizeMessage" class="message"></span>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" id="updateInfo">提交</button>
								<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
							</div>
						</div>
					</div>
				</div>
				<!--列表内容-->
				<div class="page_content clearfix mb15 table-module ">
					<table class="gallery table table_list table_striped table-bordered " id="tableList">
						<thead>
							<tr>

								<th width="120"><p>PID</p></th>
								<th width="100"><p>塘名</p></th>
								<th width="100"><p>所属人</p></th>
								<th width="50"><p>尺寸</p></th>
								<th width="350"><p>地址</p></th>
								<th width="150"><p>类型</p></th>
								<th width="100"><p>状态</p></th>

							</tr>
						</thead>
						<tbody id="productlist">
						<tr class="relative" th:each="ponds,pondsList:${pondsPOJOList}">
							<td th:text="${ponds.pid}"></td>
							<td th:text="${ponds.pName}"></td>
							<td th:text="${ponds.fName}"></td>
							<td th:text="${ponds.pSize}"></td>
							<td th:text="${ponds.pAddress}"></td>
							<td th:text="${ponds.pType}"></td>
							<td >
								<a class="name_status  plf10 btn btn-gray"  th:onclick="changeINFO([[${ponds.pid}]])"  data-toggle="modal" data-target="#changeInfoModal" title="变更信息">变更信息</a>
								<a class="name_status  plf10 btn btn-danger"  th:onclick="filled([[${ponds.pid}]])">填埋</a>
							</td>
						</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</body>

</html>

<script>
	$(function() {
		//内页框架结构编辑
		$("#situation").Hupage({
			slide: '#breadcrumb',
			padding: 15,
			menuModule: '#bk-con-menu', //菜单模块
			pagecontent: '.page_content', //自定义属性
			operation: '.operation', //自定义属性
			scrollbar: function(e) {
				e.niceScroll({
					cursorcolor: "#dddddd",
					cursoropacitymax: 1,
					touchbehavior: false,
					cursorwidth: "3px",
					cursorborder: "0",
					cursorborderradius: "3px",
				});
			},
			expand: function(thisBox, settings) {
				var pc = "";
				$(settings.pagecontent).css("margin-bottom") != null ? pc = parseInt($(settings.pagecontent).css("margin-bottom").replace("px", "")) : '';
				$(settings.pagecontent).css({
					height: $(window).height() - $(settings.operation).outerHeight() - pc - (settings.padding * 2)
				})
				settings.scrollbar($(settings.slide) && $(settings.pagecontent));
				//获取设置url
				$.getUrlParam = function(name) {
					var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
					var r = window.location.search.substr(1).match(reg);
					if(r != null) return unescape(r[2]);
					return null;
				}


				advertisMore(function(listArr) {
					var listhtml = $('#productlist');
					var html = template('producthtml', {
						id: id,
						list: listArr.data,
						sorts: listArr.sort
					});
					var s = listArr.data.length;
					$("#quantity").html(s);

					listhtml.append(html);
					new TableSorter("tableList", 4, 5, 7, 9); //设置
					$("#situation").Hupage({});//加载完数据执行
				});
			} //自定义方法
		});
	})
</script>

<style type="text/css">
	.message{
		font-size: 12px;
		color: red;
	}
</style>
