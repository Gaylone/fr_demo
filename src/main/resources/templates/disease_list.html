<!DOCTYPE html >
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <base th:href="${#request.getContextPath()}+'/'">
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <link th:href="@{asserts/css/SYSFrame.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{asserts/font/iconfont.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{asserts/css/module.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{asserts/css/pages.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{asserts/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
    <title>渔病记录</title>
    <script th:src="@{asserts/js/jquery-3.4.1.min.js}" type="text/javascript"></script>
    <script th:src="@{asserts/js/bootstrap.min.js}" type="text/javascript"></script>
    <script th:src="@{asserts/js/jquery.nicescroll.js}" type="text/javascript"></script>
    <script th:src="@{asserts/js/HUpages.js}" type="text/javascript"></script>
    <script th:src="@{asserts/js/other/disease.js}" type="text/javascript"></script>
    <script th:src="@{asserts/js/template.js}" type="text/javascript"></script>
    <script th:src="@{asserts/js/common.js}" type="text/javascript"></script>
    <!--[if lt IE 9]>
    <script th:src="@{asserts/js/html5shiv.js}" type="text/javascript"></script>
    <script th:src="@{asserts/js/css3-mediaqueries.js}"  type="text/javascript"></script>
    <![endif]-->
</head>

<body id="situation" class="pagebox">
<div class="pages-style">
    <!--左侧菜单栏-->

    <!--右侧内容-->
    <div class="bk-con-message message-section" id="iframe_box">
        <!--编辑内容-->
        <div class="operation  mb15 relative">
            <button  class="btn button_btn bg-deep-blue menuUl_title" type="button" data-toggle="modal" data-target="#myModal" title="新增渔病">
                <i class="iconfont"></i>&nbsp;新增渔病
            </button>

        </div>

        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">新增渔病</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="dName">病名</label>
                            <input type="text" class="form-control" id="dName" placeholder="">
                            <span class="message" id="dNameMassage"></span>
                        </div>
                        <div class="form-group">
                            <label for="memo">描述</label>
                            <textarea class="form-control" rows="3" id="memo" placeholder="疾病的表现形式"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" id="saveDisease">保存</button>
                    </div>
                </div>
            </div>
        </div>

        <!--列表内容-->
        <div class="page_content clearfix mb15 table-module ">
            <table class="gallery table table_list table_striped table-bordered " id="tableList">
                <thead>
                <tr>

                    <th width="5%">编号</th>
                    <th  width="20%">病名</th>
                    <th  width="75%">症状表现</th>
                </tr>
                </thead>
                <tbody id="productlist">
                <tr class="relative" th:each="disease,diseaseList:${diseasePOJOList}">

                    <td th:text="${disease.did}"></td>
                    <td th:text="${disease.dName}"></td>
                    <td th:text="${disease.memo}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>

</html>

<script>
    $(function() {
        //内页框架结构编辑
        $("#situation").Hupage({
            slide: '#breadcrumb',
            padding: 15,
            menuModule: '#bk-con-menu', //菜单模块
            pagecontent: '.page_content', //自定义属性
            operation: '.operation', //自定义属性
            scrollbar: function(e) {
                e.niceScroll({
                    cursorcolor: "#dddddd",
                    cursoropacitymax: 1,
                    touchbehavior: false,
                    cursorwidth: "3px",
                    cursorborder: "0",
                    cursorborderradius: "3px",
                });
            },
            expand: function(thisBox, settings) {
                var pc = "";
                $(settings.pagecontent).css("margin-bottom") != null ? pc = parseInt($(settings.pagecontent).css("margin-bottom").replace("px", "")) : '';
                $(settings.pagecontent).css({
                    height: $(window).height() - $(settings.operation).outerHeight() - pc - (settings.padding * 2)
                })
                settings.scrollbar($(settings.slide) && $(settings.pagecontent));
                //获取设置url
                $.getUrlParam = function(name) {
                    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                    var r = window.location.search.substr(1).match(reg);
                    if(r != null) return unescape(r[2]);
                    return null;
                }
                var id = $.getUrlParam('fid'); //获取其中的参数值
                //编辑数据
                var advertisMore = function(callback) {
                    $.ajax({
                        url: "asserts/json/farmer.json",
                        type: "GET",
                        dataType: 'json',
                        success: function(ret) {
                            typeof callback == 'function' && callback(ret);
                        },
                    });
                };
                advertisMore(function(listArr) {
                    var listhtml = $('#productlist');
                    var html = template('producthtml', {
                        id: id,
                        list: listArr.data,
                        sorts: listArr.sort
                    });
                    var s = listArr.data.length;
                    $("#quantity").html(s);

                    listhtml.append(html);
                    new TableSorter("tableList", 4, 5, 7, 9); //设置
                    $("#situation").Hupage({});//加载完数据执行
                });
            } //自定义方法
        });
    })
</script>

<style type="text/css">
    .message{
        font-size: 12px;
        color: red;
    }
</style>
